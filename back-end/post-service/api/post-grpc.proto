syntax="proto3";

package proto;

option go_package = "github.com/billzayy/social-media/back-end/post-service/api";

import "google/protobuf/empty.proto";

service PostService{
    // Post Functions
    rpc CreatePost(CreatePostReq) returns (CreatePostResp);
    rpc GetPost(google.protobuf.Empty) returns (GetPostResp);
    rpc DeletePost(DeletePostReq) returns (google.protobuf.Empty);

    // Like Interact Functions
    rpc CheckLike(LikeRequest) returns(CheckLikeResp);
    rpc AddLike(LikeRequest) returns(google.protobuf.Empty);
    rpc RemoveLike(LikeRequest) returns(google.protobuf.Empty);

    // Comment Interact Functions
    rpc AddComment(AddCommentReq) returns(google.protobuf.Empty);
    rpc DeleteComment(DeleteCommentReq) returns(google.protobuf.Empty);
}

message CreatePostReq{
    string UserId = 1;
    string Content = 2;
    string CreatedAt = 3;
}

message CreatePostResp{
    string Message = 1; 
}
 
message GetPostResp{
    repeated PostResp PostList = 1;
}

message PostResp {
    string PostId = 1;
    Users Author = 2;
    string Content = 3;
    repeated PostMedia Media = 4;
    string CreatedAt = 5;
    int32 Likes = 6;
    int32 Comments = 7;
    int32 Shares = 8;
}

message DeletePostReq{
    string Id = 1;
}

message Users {
    string UserId = 1;
    string FullName = 2;
    string ProfilePicture = 3;
}

message PostMedia{
    string PostId = 1;
    string Type = 2;
    string Url = 3;
}

message LikeRequest{
    string UserId = 1;
    string PostId = 2;
}

message CheckLikeResp{
    bool Valid = 1;
}

message AddCommentReq{
    string UserId = 1;
    string PostId = 2;
    string Comment = 3;
}

message DeleteCommentReq{
    string Id = 1;
    string PostId = 2;
}